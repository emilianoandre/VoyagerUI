<div id="permissionSpinner" class="spinner" hidden>
	<div class="rect1"></div>
	<div class="rect2"></div>
	<div class="rect3"></div>
	<div class="rect4"></div>
	<div class="rect5"></div>
</div>

<div id="permissionTableDiv">
	<alert></alert>
	<p-dataTable [value]="permissions" [rows]="10" [paginator]="true"
		[pageLinks]="3" [rowsPerPageOptions]="[5,10,20]"
		selectionMode="single" [(selection)]="selectedPermission"> 
		<p-column *ngFor="let col of cols" [field]="col.field" [header]="col.header" [styleClass]="col.styleClass"
			[sortable]="true">
		</p-column>
		<footer>
			<div class="ui-helper-clearfix" style="width: 100%">
				<button type="button" pButton icon="fa-plus" style="float: left"
					(click)="showDialog(true)" label="Add"></button>
				<button type="button" pButton icon="fa-edit" style="float: left"
					(click)="showDialog(false, selectedPermission)" label="Edit"></button>
				<button type="button" pButton icon="fa-remove" style="float: right"
					(click)="deletePermission(selectedPermission)" label="Delete"></button>
			</div>
		</footer> 
	</p-dataTable>

	<p-dialog header="BugSystem Type Details" [(visible)]="displayDialog"
		[responsive]="true" showEffect="fade" [modal]="true">
		<form [formGroup]="permissionForm">
			<div
				class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid type-popup"
				style="margin: 10px 0px">
				<div class="ui-grid-row">
					<div class="ui-grid-col-3">ID:</div>
					<div class="ui-grid-col-8">
						<input type="text" formControlName="permissionId"
							[(ngModel)]="permission.idPermission" class="form-control"/>
					</div>
				</div>
				<div class="ui-grid-row">
					<div class="ui-grid-col-3">Name *:</div>
					<div class="ui-grid-col-8">
						<input type="text" formControlName="permissionName"
							placeholder="Required" [(ngModel)]="permission.name"
							class="form-control" />
						<div
							*ngIf="!permissionForm.controls['permissionName'].valid&&permissionForm.controls['permissionName'].dirty"
							class="alert alert-danger">
							<div *ngIf="permissionForm.controls['permissionName'].errors['required']">
								Name is required</div>
							<div *ngIf="permissionForm.controls['permissionName'].errors['minlength']">
								Name must be at least 4 characters long.</div>
							<div *ngIf="permissionForm.controls['permissionName'].errors['maxlength']">
								Name cannot be more than 100 characters long.</div>
						</div>
					</div>
				</div>
				<footer>
					<div
						class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
						<button type="button" pButton icon="fa-check" (click)="save()"
							label="Save" [disabled]="!permissionForm.valid"></button>
						<button type="button" pButton icon="fa-close"
							(click)="closeDialog()" label="Cancel"></button>
					</div>
				</footer>
			</div>
		</form>
	</p-dialog>
</div>